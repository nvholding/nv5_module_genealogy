!function(t,e,i,n){"use strict";var s=["","webkit","moz","MS","ms","o"],r=e.createElement("div"),o="function",h=Math.round,a=Math.abs,u=Date.now;function c(t,e,i){return setTimeout(m(t,i),e)}function l(t,e,i){return!!Array.isArray(t)&&(p(t,i[e],i),!0)}function p(t,e,i){var s;if(t){if(t.forEach)t.forEach(e,i);else if(n!==t.length)for(s=0;s<t.length;)e.call(i,t[s],s,t),s++;else for(s in t)t.hasOwnProperty(s)&&e.call(i,t[s],s,t)}}function f(t,e,i){for(var s=Object.keys(e),r=0;r<s.length;)(!i||i&&n===t[s[r]])&&(t[s[r]]=e[s[r]]),r++;return t}function d(t,e){return f(t,e,!0)}function v(t,e,i){var n,s=e.prototype;(n=t.prototype=Object.create(s)).constructor=t,n._super=s,i&&f(n,i)}function m(t,e){return function i(){return t.apply(e,arguments)}}function g(t,e){return typeof t==o?t.apply(e&&e[0]||n,e):t}function T(t,e){return t===n?e:t}function $(t,e,i){p(I(e),function(e){t.addEventListener(e,i,!1)})}function _(t,e,i){p(I(e),function(e){t.removeEventListener(e,i,!1)})}function y(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function E(t,e){return t.indexOf(e)>-1}function I(t){return t.trim().split(/\s+/g)}function A(t,e,i){if(t.indexOf&&!i)return t.indexOf(e);for(var n=0;n<t.length;){if(i&&t[n][i]==e||!i&&t[n]===e)return n;n++}return -1}function S(t){return Array.prototype.slice.call(t,0)}function D(t,e,i){for(var n=[],s=[],r=0;r<t.length;){var o=e?t[r][e]:t[r];0>A(s,o)&&n.push(t[r]),s[r]=o,r++}return i&&(n=e?n.sort(function t(i,n){return i[e]>n[e]}):n.sort()),n}function w(t,e){for(var i,n,r=e[0].toUpperCase()+e.slice(1),o=0;o<s.length;){if((n=(i=s[o])?i+r:e)in t)return n;o++}}var C=1;function R(t){var e=t.ownerDocument;return e.defaultView||e.parentWindow}var b="ontouchstart"in t,z=n!==w(t,"PointerEvent"),N=b&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),P="touch",x="mouse",X=30,Y=["x","y"],F=["clientX","clientY"];function O(t,e){var i=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){g(t.options.enable,[t])&&i.handler(e)},this.init()}function W(t,e,i){var s,r,o,h,c,l,p,f,d,v,m,g,T,$,_,E,I,A,S,D,w=i.pointers.length,C=i.changedPointers.length,R=1&e&&w-C==0;i.isFirst=!!R,i.isFinal=!!(12&e&&w-C==0),R&&(t.session={}),i.eventType=e,s=t,r=i,o=s.session,c=(h=r.pointers).length,o.firstInput||(o.firstInput=q(r)),c>1&&!o.firstMultiple?o.firstMultiple=q(r):1===c&&(o.firstMultiple=!1),l=o.firstInput,f=(p=o.firstMultiple)?p.center:l.center,d=r.center=M(h),r.timeStamp=u(),r.deltaTime=r.timeStamp-l.timeStamp,r.angle=k(f,d),r.distance=H(f,d),v=o,g=(m=r).center,T=v.offsetDelta||{},$=v.prevDelta||{},_=v.prevInput||{},(1===m.eventType||4===_.eventType)&&($=v.prevDelta={x:_.deltaX||0,y:_.deltaY||0},T=v.offsetDelta={x:g.x,y:g.y}),m.deltaX=$.x+(g.x-T.x),m.deltaY=$.y+(g.y-T.y),r.offsetDirection=L(r.deltaX,r.deltaY),r.scale=p?(E=p.pointers,I=h,H(I[0],I[1],F)/H(E[0],E[1],F)):1,r.rotation=p?(A=p.pointers,S=h,k(S[1],S[0],F)-k(A[1],A[0],F)):0,function t(e,i){var s,r,o,h,u=e.lastInterval||i,c=i.timeStamp-u.timeStamp;if(8!=i.eventType&&(c>25||n===u.velocity)){var l,p,f,d=u.deltaX-i.deltaX,v=u.deltaY-i.deltaY,m=(l=c,p=d,f=v,{x:p/l||0,y:f/l||0});r=m.x,o=m.y,s=a(m.x)>a(m.y)?m.x:m.y,h=L(d,v),e.lastInterval=i}else s=u.velocity,r=u.velocityX,o=u.velocityY,h=u.direction;i.velocity=s,i.velocityX=r,i.velocityY=o,i.direction=h}(o,r),D=s.element,y(r.srcEvent.target,D)&&(D=r.srcEvent.target),r.target=D,t.emit("hammer.input",i),t.recognize(i),t.session.prevInput=i}function q(t){for(var e=[],i=0;i<t.pointers.length;)e[i]={clientX:h(t.pointers[i].clientX),clientY:h(t.pointers[i].clientY)},i++;return{timeStamp:u(),pointers:e,center:M(e),deltaX:t.deltaX,deltaY:t.deltaY}}function M(t){var e=t.length;if(1===e)return{x:h(t[0].clientX),y:h(t[0].clientY)};for(var i=0,n=0,s=0;s<e;)i+=t[s].clientX,n+=t[s].clientY,s++;return{x:h(i/e),y:h(n/e)}}function L(t,e){return t===e?1:a(t)>=a(e)?t>0?2:4:e>0?8:16}function H(t,e,i){i||(i=Y);var n=e[i[0]]-t[i[0]],s=e[i[1]]-t[i[1]];return Math.sqrt(n*n+s*s)}function k(t,e,i){i||(i=Y);var n=e[i[0]]-t[i[0]];return 180*Math.atan2(e[i[1]]-t[i[1]],n)/Math.PI}O.prototype={handler:function(){},init:function(){this.evEl&&$(this.element,this.evEl,this.domHandler),this.evTarget&&$(this.target,this.evTarget,this.domHandler),this.evWin&&$(R(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&_(this.element,this.evEl,this.domHandler),this.evTarget&&_(this.target,this.evTarget,this.domHandler),this.evWin&&_(R(this.element),this.evWin,this.domHandler)}};var U={mousedown:1,mousemove:2,mouseup:4};function G(){this.evEl="mousedown",this.evWin="mousemove mouseup",this.allow=!0,this.pressed=!1,O.apply(this,arguments)}v(G,O,{handler:function t(e){var i=U[e.type];1&i&&0===e.button&&(this.pressed=!0),2&i&&1!==e.which&&(i=4),this.pressed&&this.allow&&(4&i&&(this.pressed=!1),this.callback(this.manager,i,{pointers:[e],changedPointers:[e],pointerType:x,srcEvent:e}))}});var V={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},Z={2:P,3:"pen",4:x,5:"kinect"},B="pointerdown",j="pointermove pointerup pointercancel";function J(){this.evEl=B,this.evWin=j,O.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}t.MSPointerEvent&&(B="MSPointerDown",j="MSPointerMove MSPointerUp MSPointerCancel"),v(J,O,{handler:function t(e){var i=this.store,n=!1,s=V[e.type.toLowerCase().replace("ms","")],r=Z[e.pointerType]||e.pointerType,o=A(i,e.pointerId,"pointerId");1&s&&(0===e.button||r==P)?o<0&&(i.push(e),o=i.length-1):12&s&&(n=!0),!(o<0)&&(i[o]=e,this.callback(this.manager,s,{pointers:i,changedPointers:[e],pointerType:r,srcEvent:e}),n&&i.splice(o,1))}});var K={touchstart:1,touchmove:2,touchend:4,touchcancel:8};function Q(){this.evTarget="touchstart",this.evWin="touchstart touchmove touchend touchcancel",this.started=!1,O.apply(this,arguments)}function tt(t,e){var i=S(t.touches),n=S(t.changedTouches);return 12&e&&(i=D(i.concat(n),"identifier",!0)),[i,n]}v(Q,O,{handler:function t(e){var i=K[e.type];if(1===i&&(this.started=!0),this.started){var n=tt.call(this,e,i);12&i&&n[0].length-n[1].length==0&&(this.started=!1),this.callback(this.manager,i,{pointers:n[0],changedPointers:n[1],pointerType:P,srcEvent:e})}}});var te={touchstart:1,touchmove:2,touchend:4,touchcancel:8};function ti(){this.evTarget="touchstart touchmove touchend touchcancel",this.targetIds={},O.apply(this,arguments)}function tn(t,e){var i=S(t.touches),n=this.targetIds;if(3&e&&1===i.length)return n[i[0].identifier]=!0,[i,i];var s,r,o=S(t.changedTouches),h=[],a=this.target;if(r=i.filter(function(t){return y(t.target,a)}),1===e)for(s=0;s<r.length;)n[r[s].identifier]=!0,s++;for(s=0;s<o.length;)n[o[s].identifier]&&h.push(o[s]),12&e&&delete n[o[s].identifier],s++;if(h.length)return[D(r.concat(h),"identifier",!0),h]}function ts(){O.apply(this,arguments);var t=m(this.handler,this);this.touch=new ti(this.manager,t),this.mouse=new G(this.manager,t)}v(ti,O,{handler:function t(e){var i=te[e.type],n=tn.call(this,e,i);n&&this.callback(this.manager,i,{pointers:n[0],changedPointers:n[1],pointerType:P,srcEvent:e})}}),v(ts,O,{handler:function t(e,i,n){var s=n.pointerType==P,r=n.pointerType==x;if(s)this.mouse.allow=!1;else if(r&&!this.mouse.allow)return;12&i&&(this.mouse.allow=!0),this.callback(e,i,n)},destroy:function t(){this.touch.destroy(),this.mouse.destroy()}});var tr=w(r.style,"touchAction"),to=tr!==n,th="compute",ta="auto",tu="manipulation",tc="none",tl="pan-x",tp="pan-y";function tf(t,e){this.manager=t,this.set(e)}function td(t){this.id=C++,this.manager=null,this.options=d(t||{},this.defaults),this.options.enable=T(this.options.enable,!0),this.state=1,this.simultaneous={},this.requireFail=[]}function tv(t){return 16==t?"down":8==t?"up":2==t?"left":4==t?"right":""}function tm(t,e){var i=e.manager;return i?i.get(t):t}function tg(){td.apply(this,arguments)}function tT(){tg.apply(this,arguments),this.pX=null,this.pY=null}function t$(){tg.apply(this,arguments)}function t_(){td.apply(this,arguments),this._timer=null,this._input=null}function ty(){tg.apply(this,arguments)}function tE(){tg.apply(this,arguments)}function t0(){td.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function tI(t,e){return(e=e||{}).recognizers=T(e.recognizers,tI.defaults.preset),new tA(t,e)}function tA(t,e){var i,n,s;e=e||{},this.options=d(e,tI.defaults),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.element=t,this.input=(i=this,new(n=(s=i.options.inputClass)||(z?J:N?ti:b?ts:G))(i,W)),this.touchAction=new tf(this,this.options.touchAction),t8(this,!0),p(e.recognizers,function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])},this)}function t8(t,e){var i=t.element;p(t.options.cssProps,function(t,n){i.style[w(i.style,n)]=e?t:""})}tf.prototype={set:function(t){t==th&&(t=this.compute()),to&&(this.manager.element.style[tr]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return p(this.manager.recognizers,function(e){g(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),function t(e){if(E(e,tc))return tc;var i=E(e,tl),n=E(e,tp);return i&&n?tl+" "+tp:i||n?i?tl:tp:E(e,tu)?tu:ta}(t.join(" "))},preventDefaults:function(t){if(!to){var e=t.srcEvent,i=t.offsetDirection;if(this.manager.session.prevented){e.preventDefault();return}var n=this.actions,s=E(n,tc),r=E(n,tp),o=E(n,tl);if(s||r&&6&i||o&&24&i)return this.preventSrc(e)}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}},td.prototype={defaults:{},set:function(t){return f(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(l(t,"recognizeWith",this))return this;var e=this.simultaneous;return e[(t=tm(t,this)).id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return l(t,"dropRecognizeWith",this)||(t=tm(t,this),delete this.simultaneous[t.id]),this},requireFailure:function(t){if(l(t,"requireFailure",this))return this;var e=this.requireFail;return -1===A(e,t=tm(t,this))&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(l(t,"dropRequireFailure",this))return this;t=tm(t,this);var e=A(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){var e=this,i=this.state;function n(n){var s;e.manager.emit(e.options.event+(n?(s=i,16&s?"cancel":8&s?"end":4&s?"move":2&s?"start":""):""),t)}i<8&&n(!0),n(),i>=8&&n(!0)},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=32},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(33&this.requireFail[t].state))return!1;t++}return!0},recognize:function(t){var e=f({},t);if(!g(this.options.enable,[this,e])){this.reset(),this.state=32;return}56&this.state&&(this.state=1),this.state=this.process(e),30&this.state&&this.tryEmit(e)},process:function(t){},getTouchAction:function(){},reset:function(){}},v(tg,td,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,i=t.eventType,n=6&e,s=this.attrTest(t);return n&&(8&i||!s)?16|e:n||s?4&i?8|e:2&e?4|e:2:32}}),v(tT,tg,{defaults:{event:"pan",threshold:10,pointers:1,direction:X},getTouchAction:function(){var t=this.options.direction,e=[];return 6&t&&e.push(tp),24&t&&e.push(tl),e},directionTest:function(t){var e=this.options,i=!0,n=t.distance,s=t.direction,r=t.deltaX,o=t.deltaY;return s&e.direction||(6&e.direction?(s=0===r?1:r<0?2:4,i=r!=this.pX,n=Math.abs(t.deltaX)):(s=0===o?1:o<0?8:16,i=o!=this.pY,n=Math.abs(t.deltaY))),t.direction=s,i&&n>e.threshold&&s&e.direction},attrTest:function(t){return tg.prototype.attrTest.call(this,t)&&(2&this.state||!(2&this.state)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=tv(t.direction);e&&this.manager.emit(this.options.event+e,t),this._super.emit.call(this,t)}}),v(t$,tg,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[tc]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||2&this.state)},emit:function(t){if(this._super.emit.call(this,t),1!==t.scale){var e=t.scale<1?"in":"out";this.manager.emit(this.options.event+e,t)}}}),v(t_,td,{defaults:{event:"press",pointers:1,time:500,threshold:5},getTouchAction:function(){return[ta]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,n=t.distance<e.threshold,s=t.deltaTime>e.time;if(this._input=t,n&&i&&(!(12&t.eventType)||s)){if(1&t.eventType)this.reset(),this._timer=c(function(){this.state=8,this.tryEmit()},e.time,this);else if(4&t.eventType)return 8}else this.reset();return 32},reset:function(){clearTimeout(this._timer)},emit:function(t){8===this.state&&(t&&4&t.eventType?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=u(),this.manager.emit(this.options.event,this._input)))}}),v(ty,tg,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[tc]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||2&this.state)}}),v(tE,tg,{defaults:{event:"swipe",threshold:10,velocity:.65,direction:30,pointers:1},getTouchAction:function(){return tT.prototype.getTouchAction.call(this)},attrTest:function(t){var e,i=this.options.direction;return 30&i?e=t.velocity:6&i?e=t.velocityX:24&i&&(e=t.velocityY),this._super.attrTest.call(this,t)&&i&t.direction&&t.distance>this.options.threshold&&a(e)>this.options.velocity&&4&t.eventType},emit:function(t){var e=tv(t.direction);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),v(t0,td,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:2,posThreshold:10},getTouchAction:function(){return[tu]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,n=t.distance<e.threshold,s=t.deltaTime<e.time;if(this.reset(),1&t.eventType&&0===this.count)return this.failTimeout();if(n&&s&&i){if(4!=t.eventType)return this.failTimeout();var r=!this.pTime||t.timeStamp-this.pTime<e.interval,o=!this.pCenter||H(this.pCenter,t.center)<e.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,o&&r?this.count+=1:this.count=1,this._input=t,0==this.count%e.taps)return this.hasRequireFailures()?(this._timer=c(function(){this.state=8,this.tryEmit()},e.interval,this),2):8}return 32},failTimeout:function(){return this._timer=c(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),tI.VERSION="2.0.4",tI.defaults={domEvents:!1,touchAction:th,enable:!0,inputTarget:null,inputClass:null,preset:[[ty,{enable:!1}],[t$,{enable:!1},["rotate"]],[tE,{direction:6}],[tT,{direction:6},["swipe"]],[t0],[t0,{event:"doubletap",taps:2},["tap"]],[t_]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},tA.prototype={set:function(t){return f(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e,i=this.session;if(!i.stopped){this.touchAction.preventDefaults(t);var n=this.recognizers,s=i.curRecognizer;(!s||s&&8&s.state)&&(s=i.curRecognizer=null);for(var r=0;r<n.length;)e=n[r],2!==i.stopped&&(!s||e==s||e.canRecognizeWith(s))?e.recognize(t):e.reset(),!s&&14&e.state&&(s=i.curRecognizer=e),r++}},get:function(t){if(t instanceof td)return t;for(var e=this.recognizers,i=0;i<e.length;i++)if(e[i].options.event==t)return e[i];return null},add:function(t){if(l(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(l(t,"remove",this))return this;var e=this.recognizers;return t=this.get(t),e.splice(A(e,t),1),this.touchAction.update(),this},on:function(t,e){var i=this.handlers;return p(I(t),function(t){i[t]=i[t]||[],i[t].push(e)}),this},off:function(t,e){var i=this.handlers;return p(I(t),function(t){e?i[t].splice(A(i[t],e),1):delete i[t]}),this},emit:function(t,i){this.options.domEvents&&(n=t,s=i,r=e.createEvent("Event"),r.initEvent(n,!0,!0),r.gesture=s,s.target.dispatchEvent(r));var n,s,r,o=this.handlers[t]&&this.handlers[t].slice();if(o&&o.length){i.type=t,i.preventDefault=function(){i.srcEvent.preventDefault()};for(var h=0;h<o.length;)o[h](i),h++}},destroy:function(){this.element&&t8(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},f(tI,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:32,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:24,DIRECTION_ALL:X,Manager:tA,Input:O,TouchAction:tf,TouchInput:ti,MouseInput:G,PointerEventInput:J,TouchMouseInput:ts,SingleTouchInput:Q,Recognizer:td,AttrRecognizer:tg,Tap:t0,Pan:tT,Swipe:tE,Pinch:t$,Rotate:ty,Press:t_,on:$,off:_,each:p,merge:d,extend:f,inherit:v,bindFn:m,prefixed:w}),typeof define==o&&define.amd?define(function(){return tI}):"undefined"!=typeof module&&module.exports?module.exports=tI:t[i]=tI}(window,document,"Hammer");
